<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">.lst-kix_u12um6jr27qd-2>li:before{content:"\0025a0  "}.lst-kix_u12um6jr27qd-3>li:before{content:"\0025cf  "}.lst-kix_ydlysbibqqvh-1>li:before{content:"\0025cb  "}.lst-kix_ydlysbibqqvh-0>li:before{content:"\0025cf  "}.lst-kix_ydlysbibqqvh-2>li:before{content:"\0025a0  "}.lst-kix_u12um6jr27qd-0>li:before{content:"\0025cf  "}.lst-kix_u12um6jr27qd-1>li:before{content:"\0025cb  "}.lst-kix_ydlysbibqqvh-5>li:before{content:"\0025a0  "}.lst-kix_ydlysbibqqvh-4>li:before{content:"\0025cb  "}.lst-kix_ydlysbibqqvh-6>li:before{content:"\0025cf  "}.lst-kix_ydlysbibqqvh-3>li:before{content:"\0025cf  "}.lst-kix_ydlysbibqqvh-7>li:before{content:"\0025cb  "}.lst-kix_opqw4m9ykhw-0>li:before{content:"\0025cf  "}.lst-kix_opqw4m9ykhw-3>li:before{content:"\0025cf  "}.lst-kix_opqw4m9ykhw-2>li:before{content:"\0025a0  "}.lst-kix_opqw4m9ykhw-4>li:before{content:"\0025cb  "}.lst-kix_opqw4m9ykhw-1>li:before{content:"\0025cb  "}.lst-kix_opqw4m9ykhw-5>li:before{content:"\0025a0  "}ul.lst-kix_ydlysbibqqvh-8{list-style-type:none}ul.lst-kix_ydlysbibqqvh-7{list-style-type:none}ul.lst-kix_ydlysbibqqvh-6{list-style-type:none}ul.lst-kix_ydlysbibqqvh-5{list-style-type:none}ul.lst-kix_ydlysbibqqvh-4{list-style-type:none}.lst-kix_ydlysbibqqvh-8>li:before{content:"\0025a0  "}ul.lst-kix_ydlysbibqqvh-3{list-style-type:none}ul.lst-kix_ydlysbibqqvh-2{list-style-type:none}ul.lst-kix_ydlysbibqqvh-1{list-style-type:none}ul.lst-kix_ydlysbibqqvh-0{list-style-type:none}.lst-kix_u12um6jr27qd-7>li:before{content:"\0025cb  "}.lst-kix_u12um6jr27qd-6>li:before{content:"\0025cf  "}.lst-kix_opqw4m9ykhw-7>li:before{content:"\0025cb  "}.lst-kix_opqw4m9ykhw-6>li:before{content:"\0025cf  "}.lst-kix_opqw4m9ykhw-8>li:before{content:"\0025a0  "}.lst-kix_u12um6jr27qd-4>li:before{content:"\0025cb  "}.lst-kix_u12um6jr27qd-5>li:before{content:"\0025a0  "}ul.lst-kix_u12um6jr27qd-8{list-style-type:none}ul.lst-kix_u12um6jr27qd-7{list-style-type:none}ul.lst-kix_u12um6jr27qd-6{list-style-type:none}ul.lst-kix_u12um6jr27qd-5{list-style-type:none}ul.lst-kix_u12um6jr27qd-4{list-style-type:none}ul.lst-kix_u12um6jr27qd-3{list-style-type:none}ul.lst-kix_u12um6jr27qd-2{list-style-type:none}ul.lst-kix_u12um6jr27qd-1{list-style-type:none}ul.lst-kix_u12um6jr27qd-0{list-style-type:none}.lst-kix_u12um6jr27qd-8>li:before{content:"\0025a0  "}ul.lst-kix_opqw4m9ykhw-0{list-style-type:none}ul.lst-kix_opqw4m9ykhw-2{list-style-type:none}ul.lst-kix_opqw4m9ykhw-1{list-style-type:none}ul.lst-kix_opqw4m9ykhw-4{list-style-type:none}ul.lst-kix_opqw4m9ykhw-3{list-style-type:none}ul.lst-kix_opqw4m9ykhw-6{list-style-type:none}ul.lst-kix_opqw4m9ykhw-5{list-style-type:none}ul.lst-kix_opqw4m9ykhw-8{list-style-type:none}ul.lst-kix_opqw4m9ykhw-7{list-style-type:none}ol{margin:0;padding:0}table td,table th{padding:0}.c7{padding-top:0pt;padding-bottom:0pt;line-height:1.0;page-break-after:avoid;text-align:center;height:20pt}.c9{padding-top:0pt;padding-bottom:0pt;line-height:1.0;page-break-after:avoid;text-align:center}.c5{background-color:#ffffff;max-width:451.4pt;padding:72pt 72pt 72pt 72pt}.c1{orphans:2;widows:2;height:11pt}.c0{font-weight:bold;text-decoration:underline}.c8{color:#666666;font-style:italic}.c6{padding:0;margin:0}.c2{orphans:2;widows:2}.c3{margin-left:36pt;padding-left:0pt}.c4{font-size:10pt;font-style:italic}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c5"><div><p class="c2"><span class="c8">Student ID: 719079</span></p></div><h1 class="c2 c9" id="h.y6xlskdxrpw7"><span>Final Version Specification</span></h1><p class="c1"><span></span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">API Router:<br></span><span>Any requests sent to the API are redirected to &lsquo;index.php&rsquo; where the requests are parsed and passed to the API router &lsquo;router.php&rsquo;. Actions are performed depending on the various levels of current authorisation the user has, the url of the request and the type of request.</span></p><p class="c1"><span></span></p><p class="c2"><span class="c0">Database:</span></p><p class="c2"><span>The database is a PHP Object that initializes connection to the database through PDO on creation of the database object. Any configuration required for the database can be found in this object. Queries are performed via prepared sql statements and uses bindings to prevent SQL injection. </span></p><p class="c1"><span></span></p><p class="c2"><span class="c0">Entity:</span></p><p class="c2"><span>For ease of identification all entities (&lsquo;Profile&rsquo;, &lsquo;University&rsquo;, &lsquo;Course&rsquo;, Group&rsquo;) are given a unique entity id number and allows all entities to be referred to by a single id. This is used in areas where you need to refer to a specific entity that could be any of the above types, such as the target of a Post.</span></p><p class="c1"><span></span></p><p class="c2"><span class="c0">Google oAuth:</span></p><p class="c2"><span>oAuth is performed in two stages, first the user is redirected to Google with a url built from &lsquo;oAuth.php&rsquo;. The redirect domain &lsquo;http://&lt;domain&gt;/api/2/oauth/authorise&rsquo; will pass the token to the server. The server will authorise the token and communicate with Google directly approve the token and get account details. </span></p><p class="c2"><span class="c4">NOTE: The redirect requires third party set up via Google API dashboard, this mainly involves giving an authorised redirect URL, without this Google will not redirect back to your website. </span></p><p class="c1"><span></span></p><p class="c2"><span>User profiles are identified via the unique google ID know as sub, this is compared to current users on record and if none is found then the user can create a new Profile.</span></p><p class="c1"><span></span></p><p class="c2"><span>A user can have three logged in states:</span></p><ul class="c6 lst-kix_u12um6jr27qd-0 start"><li class="c2 c3"><span>unauthorised and not logged in - User can start authorisation</span></li><li class="c2 c3"><span>authorised but not logged in - User can create a Profile</span></li><li class="c2 c3"><span>authorized and logged in - User can access full API</span></li></ul><p class="c1"><span></span></p><p class="c2"><span class="c0">Privacy:</span></p><p class="c2"><span>User can access information based upon university and group membership. A user cannot access any profiles or information that is under a different university. Within your university you can only access Posts from your course and groups you are part of. </span></p><p class="c1"><span></span></p><p class="c2"><span>Privacy settings are included in the final version but currently they have no affect on user access.</span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">Profiles:</span></p><p class="c2"><span>Profiles can be created and deleted but currently there is no editing ability aside from direct database editing. You can visit and post on individual profiles found via the search, these posts can be seen by all who visit that users profile.</span></p><p class="c1"><span></span></p><p class="c2"><span class="c0">University:</span></p><p class="c2"><span>A University can be created via API but there is no current implementation on the client side, this is due to multiple reasons but the main being that creating a university has major impact on the how the site is run. In practice there should be one university for thousands of students and it doesn&rsquo;t make sense to give every user access to creating a university. I have included it in the API for REST but it would only be accessible by the manager of the API in practice. </span></p><p class="c1"><span></span></p><p class="c2"><span>There is currently no functionality to edit university information. </span></p><p class="c1"><span></span></p><p class="c2"><span>There is no deletion functionality by choice as there is lots of dependency on the university entity and the deletion of a university would break a lot of entity and post data. </span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">Course:</span></p><p class="c2"><span>Courses can be created and the user that creates them automatically joins that course. There is no ability to edit or delete a course currently.</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">Groups:</span></p><p class="c2"><span>Groups can be created by users and have multiple configurations; all user groups are part of a university but upon creation the user can decide whether that group is also course specific or not also whether it is unit of that course. </span></p><p class="c1"><span></span></p><p class="c2"><span>Users also have the ability to join or leave groups, which allows access to post and see posts in that group.</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">Drag and Drop Directories:</span></p><p class="c2"><span>The functionality for drag and dropping files on the homepage, utilizes new functionality of the firefox data transfer object &lsquo;.GetFilesAndDirectories()&rsquo;. This gets an array of files and subdirectories in a given file using Promises. Performing this on a subdirectory will retrieve the contents of that subdirectory. This is utilized to get all files in a given directory and its associated subdirectories. This feature is very experimental and currently I have only got it to function on the nightly firefox builds.</span></p><p class="c1"><span></span></p><p class="c2"><span class="c0">Repository (Server Side):</span></p><p class="c2"><span>The php accepts a maximum of that 20 files in a upload, this can be tweaked in the &lsquo;php.ini&rsquo; file, the uploaded files are given a unique id and moved to the &lsquo;public/repo&rsquo; directory. A reference is made in the database as to its name, type and which entity the file belongs to.</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">Searching:</span></p><p class="c2"><span>A basic search functionality for profiles and groups is in place, this allows users to search and visit profiles and groups they are authorised to find. This is the main method of finding/joining groups</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">Profile Picture Uploading:</span></p><p class="c2"><span>Uploaded profile pictures must be a &lsquo;.JPG&rsquo;, these uploaded files a placed in the &lsquo;/&rsquo;public/picture&rsquo; directory and given the name of the entity that it refers to.</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">Posting &amp; Commenting:</span></p><p class="c2"><span>Users can posts to themselves, University, Course, Groups or directly to other users. The Posts support HTML markup and all posts can be commented on.</span></p><p class="c1"><span></span></p><p class="c2"><span class="c0">ES6</span></p><p class="c2"><span>I utilise many features of ES6 that limit the browser support of the my site. The main use is in the communication between the server and the client using fetch in place of AJAX. Using this also includes utilising promises. </span></p><p class="c1"><span></span></p><p class="c2"><span>Classes are also used to store and render posts/comments.</span></p><h1 class="c2 c7" id="h.shaolyyuzyn3"><span></span></h1><p class="c1"><span class="c0"></span></p></body></html>